<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <title>Slide Arrastável</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      overflow: hidden;
      font-family: sans-serif;
    }

    .carousel {
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }

    .carousel-track {
      display: flex;
      transition: transform 0.3s ease;
      height: 100%;
    }

    .slide {
      min-width: 100vw;
      height: 100%;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3em;
      color: white;
    }

    .slide:nth-child(1) {
      background: #e74c3c;
    }

    .slide:nth-child(2) {
      background: #2980b9;
    }

    .slide:nth-child(3) {
      background: #27ae60;
    }
  </style>
</head>

<body>

  <div class="carousel">
    <div class="carousel-track" id="track">
      <div class="slide">Slide 1</div>
      <div class="slide">Slide 2</div>
      <div class="slide">Slide 3</div>
    </div>
  </div>

  <script>
    const track = document.getElementById('track');
    let startX = 0;
    let currentTranslate = 0;
    let prevTranslate = 0;
    let currentIndex = 0;
    let isDragging = false;

    function getPositionX(event) {
      return event.type.includes('mouse') ? event.pageX : event.touches[0].clientX;
    }

    function setPosition(translateX) {
      track.style.transform = `translateX(${translateX}px)`;
    }

    function touchStart(index) {
      return function (event) {
        isDragging = true;
        startX = getPositionX(event);
        track.classList.remove('transition');
      }
    }

    function touchMove(event) {
      if (!isDragging) return;
      const currentX = getPositionX(event);
      const deltaX = currentX - startX;
      currentTranslate = prevTranslate + deltaX;
      setPosition(currentTranslate);
    }

    function touchEnd() {
      if (!isDragging) return;
      isDragging = false;

      const movedBy = currentTranslate - prevTranslate;

      // Lógica para decidir se muda de slide
      if (movedBy < -100 && currentIndex < 2) currentIndex += 1;
      if (movedBy > 100 && currentIndex > 0) currentIndex -= 1;

      setSlidePositionByIndex();
    }

    function setSlidePositionByIndex() {
      currentTranslate = currentIndex * -window.innerWidth;
      prevTranslate = currentTranslate;
      track.style.transition = 'transform 0.3s ease';
      setPosition(currentTranslate);
    }

    // Event listeners
    track.addEventListener('mousedown', touchStart());
    track.addEventListener('touchstart', touchStart(), { passive: true });

    track.addEventListener('mousemove', touchMove);
    track.addEventListener('touchmove', touchMove, { passive: true });

    track.addEventListener('mouseup', touchEnd);
    track.addEventListener('mouseleave', touchEnd);
    track.addEventListener('touchend', touchEnd);
  </script>

</body>

</html>